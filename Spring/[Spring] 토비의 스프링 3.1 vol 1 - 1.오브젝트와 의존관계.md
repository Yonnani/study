# 토비의 스프링 3.1

## Vol.1 스프링의 이해와 원리

### 1장 오브젝트와 의존관계

- 스프링이 가장 관심을 많이 두는 대상은 **오브젝트**임

#### 1.1 초난감 DAO

- DAO(Data Access Object) : DB를 사용해 데이터를 조회하거나 조작하는 기능을 전담하도록 만든 오브젝트

##### 1.1.1 User

- 자바빈(JavaBean) 
  - 원래 비주얼 툴에서 조작 가능한 컴포넌트를 말함
  - 이제는 다음 두 가지 관례를 따라 만들어진 오브젝트를 가리킴
    - 디폴트 생성자 : 자바빈은 파라미터가 없는 디폴트 생성자를 갖고 있어야 한다. 툴이나 프레임워크에서 리플렉션을 이용해 오브젝트를 생성하기 때문에 필요하다.
    - 프로퍼티 : 자바빈이 노출하는 이름을 가진 속성을 프로퍼티라고 한다. 프로퍼티는 set으로 시작하는 수정자 메소드(setter)와 get으로 시작하는 접근자 메소드(getter)를 이용해 수정 또는 조회할 수 있다.

##### 1.1.2 UserDao

- JDBC를 이용하는 작업의 일반적인 순서
  - DB 연결을 위한 Connection을 가져온다.
  - SQL을 담은 Statement(또는 PreparedStatement)를 만든다.
  - 만들어진 Statement를 실행한다.
  - 조회의 경우 SQL 쿼리의 실행 결과를 ResultSet으로 받아서 정보를 저장할 오브젝트(ex. User)에 옮겨준다.
  - 작업 중에 생성된 Connection, Statement, ResultSet 같은 리소스는 작업을 마친 후 반드시 닫아준다.
  - JDBC API가 만들어내는 예외(Exception)를 잡아서 직접 처리하거나, 메소드에 throws를 선언해서 예외가 발생하면 메소드 밖으로 던지게 한다.

##### 1.1.3 main()을 이용한 DAO 테스트 코드

#### 1.2 DAO의 분리

##### 1.2.1 관심사의 분리

- 프로그래밍의 기초 개념 중에 **관심사의 분리**(Separation of Concerns)가 있음
  - 이를 객체지향에 적용해보면, 관심이 같은 것끼리는 하나의 객체 안으로 또는 친한 객체로 모이게 하고, 관심이 다른 것은 가능한 한 따로 떨어져서 서로 영향을 주지 않도록 분리하는 것
  - 관심사가 같은 것끼리 모으고 다른 것은 분리해줌으로써 같은 관심에 효과적으로 집중할 수 있게 만들어주는 것

##### 1.2.2 커넥션 만들기의 추출

###### UserDao의 관심사항

- DB 연결과 관련된 관심
- 사용자 등록을 위해 DB에 보낼 SQL 문장을 담을 Statement를 만들고 실행하는 것
- 작업이 끝나면 사용한 리소스인 Statement와 Connection 오브젝트를 닫아서 공유 리소스를 시스템에 돌려주는 것

